{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Container from '../views/Container.vue';\nimport Home from '../views/Home.vue';\nimport Login from '../views/Login.vue';\nimport Register from '../views/Register.vue';\nimport NotFound from '../views/NotFound.vue';\nVue.use(VueRouter);\nvar routes = [{\n  path: '/login',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/register',\n  name: 'Register',\n  component: Register\n}, {\n  path: '/notFound',\n  name: 'NotFound',\n  component: NotFound\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n}); // 提供一个重置路由的方法\n\nexport var resetRouter = function resetRouter() {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes: routes\n  });\n};\nexport var setRoutes = function setRoutes() {\n  var storeMenus = localStorage.getItem(\"menus\");\n\n  if (storeMenus) {\n    //dynamic route\n    var manageRoute = {\n      path: '/',\n      name: 'Container',\n      component: Container,\n      redirect: \"/home\",\n      children: []\n    };\n    var menus = JSON.parse(storeMenus);\n    menus.forEach(function (item) {\n      if (item.path) {\n        var itemMenu = {\n          path: item.path.replace(\"/\", \"\"),\n          name: item.pagePath,\n          component: function component() {\n            return import('../views/' + item.pagePath + '.vue');\n          },\n          meta: {\n            name: item.name\n          }\n        };\n        manageRoute.children.push(itemMenu);\n      } else if (item.children.length) {\n        item.children.forEach(function (subItem) {\n          if (subItem.path) {\n            var subItemMenu = {\n              path: subItem.path.replace(\"/\", \"\"),\n              name: subItem.pagePath,\n              component: function component() {\n                return import('../views/' + subItem.pagePath + '.vue');\n              },\n              meta: {\n                name: subItem.name\n              }\n            };\n            manageRoute.children.push(subItemMenu);\n          }\n        });\n      }\n    });\n    var currentRoutes = router.getRoutes().map(function (v) {\n      return v.name;\n    });\n\n    if (!currentRoutes.includes('Container')) {\n      router.addRoute(manageRoute);\n    }\n  }\n}; //reset routes\n\nsetRoutes();\nrouter.beforeEach(function (to, from, next) {});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","Container","Home","Login","Register","NotFound","use","routes","path","name","component","router","mode","base","process","env","BASE_URL","resetRouter","matcher","setRoutes","storeMenus","localStorage","getItem","manageRoute","redirect","children","menus","JSON","parse","forEach","item","itemMenu","replace","pagePath","meta","push","length","subItem","subItemMenu","currentRoutes","getRoutes","map","v","includes","addRoute","beforeEach","to","from","next"],"sources":["E:/environment/project/agricultural-management-system/web/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Container from '../views/Container.vue'\nimport Home from '../views/Home.vue'\nimport Login from '../views/Login.vue'\nimport Register from '../views/Register.vue'\nimport NotFound from '../views/NotFound.vue'\n\n\nVue.use(VueRouter)\n\nconst routes = [\n  {path: '/login', name: 'Login', component: Login,},\n  {path: '/register', name: 'Register', component: Register,},\n  {path: '/notFound', name: 'NotFound', component: NotFound,},\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 提供一个重置路由的方法\nexport const resetRouter = () => {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n  })\n}\n\nexport const setRoutes = () => {\n  const storeMenus = localStorage.getItem(\"menus\");\n  if(storeMenus){\n    //dynamic route\n    const manageRoute = { path: '/', name:'Container', component: Container, redirect:\"/home\", children:[] }\n    const menus = JSON.parse(storeMenus)\n    menus.forEach(item => {\n      if(item.path){\n        let itemMenu = { path: item.path.replace(\"/\", \"\"), name: item.pagePath, component:() => import('../views/' + item.pagePath + '.vue'), meta:{ name: item.name}}\n        manageRoute.children.push(itemMenu)\n      }else if(item.children.length){\n        item.children.forEach(subItem => {\n          if(subItem.path){\n            let subItemMenu = { path: subItem.path.replace(\"/\", \"\"), name: subItem.pagePath, component:() => import('../views/' + subItem.pagePath + '.vue'), meta:{ name: subItem.name}}\n            manageRoute.children.push(subItemMenu)\n          }  \n        })\n      }\n    });\n    const currentRoutes = router.getRoutes().map(v => v.name)\n    if(!currentRoutes.includes('Container')){\n      router.addRoute(manageRoute)\n    }\n    \n  }\n}\n\n//reset routes\nsetRoutes()\n\nrouter.beforeEach((to, from, next) => {\n  \n})\nexport default router\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}