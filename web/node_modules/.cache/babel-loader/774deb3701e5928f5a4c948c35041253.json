{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Container from '../views/Container.vue';\nimport Home from '../views/Home.vue';\nimport Login from '../views/Login.vue';\nimport Register from '../views/Register.vue';\nimport NotFound from '../views/NotFound.vue';\nimport Person from '../views/Person.vue';\nVue.use(VueRouter);\nvar routes = [{\n  path: '/login',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/register',\n  name: 'Register',\n  component: Register\n}, {\n  path: '/notFound',\n  name: 'NotFound',\n  component: NotFound\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n}); // 提供一个重置路由的方法\n\nexport var resetRouter = function resetRouter() {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes: routes\n  });\n};\nexport var setRoutes = function setRoutes() {\n  var storeMenus = localStorage.getItem(\"menus\");\n\n  if (storeMenus) {\n    var currentRoutes = router.getRoutes().map(function (v) {\n      return v.name;\n    });\n\n    if (!currentRoutes.includes('Container')) {\n      router.addRoute(manageRoute);\n    }\n  }\n}; //reset routes\n\nsetRoutes();\nrouter.beforeEach(function (to, from, next) {\n  var storeMenus = localStorage.getItem(\"menus\");\n\n  if (!to.matched.length) {\n    if (storeMenus) {\n      next(\"/notFound\");\n    } else {\n      next(\"/login\");\n    }\n  }\n\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","Container","Home","Login","Register","NotFound","Person","use","routes","path","name","component","router","mode","base","process","env","BASE_URL","resetRouter","matcher","setRoutes","storeMenus","localStorage","getItem","currentRoutes","getRoutes","map","v","includes","addRoute","manageRoute","beforeEach","to","from","next","matched","length"],"sources":["E:/environment/project/agricultural-management-system/web/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Container from '../views/Container.vue'\nimport Home from '../views/Home.vue'\nimport Login from '../views/Login.vue'\nimport Register from '../views/Register.vue'\nimport NotFound from '../views/NotFound.vue'\nimport Person from '../views/Person.vue'\n\n\nVue.use(VueRouter)\n\nconst routes = [\n  {path: '/login', name: 'Login', component: Login,},\n  {path: '/register', name: 'Register', component: Register,},\n  {path: '/notFound', name: 'NotFound', component: NotFound,},\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 提供一个重置路由的方法\nexport const resetRouter = () => {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n  })\n}\n\nexport const setRoutes = () => {\n  const storeMenus = localStorage.getItem(\"menus\");\n  if(storeMenus){\n    \n    const currentRoutes = router.getRoutes().map(v => v.name)\n    if(!currentRoutes.includes('Container')){\n      router.addRoute(manageRoute)\n    }\n    \n  }\n}\n\n//reset routes\nsetRoutes()\n\nrouter.beforeEach((to, from, next) => {\n  const storeMenus = localStorage.getItem(\"menus\")\n  if (!to.matched.length) {\n    if(storeMenus){\n      next(\"/notFound\")\n    }else{\n      next(\"/login\")\n    }\n  }\n  next()\n})\nexport default router\n"],"mappings":";;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAGAP,GAAG,CAACQ,GAAJ,CAAQP,SAAR;AAEA,IAAMQ,MAAM,GAAG,CACb;EAACC,IAAI,EAAE,QAAP;EAAiBC,IAAI,EAAE,OAAvB;EAAgCC,SAAS,EAAER;AAA3C,CADa,EAEb;EAACM,IAAI,EAAE,WAAP;EAAoBC,IAAI,EAAE,UAA1B;EAAsCC,SAAS,EAAEP;AAAjD,CAFa,EAGb;EAACK,IAAI,EAAE,WAAP;EAAoBC,IAAI,EAAE,UAA1B;EAAsCC,SAAS,EAAEN;AAAjD,CAHa,CAAf;AAMA,IAAMO,MAAM,GAAG,IAAIZ,SAAJ,CAAc;EAC3Ba,IAAI,EAAE,SADqB;EAE3BC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;EAG3BT,MAAM,EAANA;AAH2B,CAAd,CAAf,C,CAMA;;AACA,OAAO,IAAMU,WAAW,GAAG,SAAdA,WAAc,GAAM;EAC/BN,MAAM,CAACO,OAAP,GAAiB,IAAInB,SAAJ,CAAc;IAC7Ba,IAAI,EAAE,SADuB;IAE7BC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFW;IAG7BT,MAAM,EAANA;EAH6B,CAAd,CAAjB;AAKD,CANM;AAQP,OAAO,IAAMY,SAAS,GAAG,SAAZA,SAAY,GAAM;EAC7B,IAAMC,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAnB;;EACA,IAAGF,UAAH,EAAc;IAEZ,IAAMG,aAAa,GAAGZ,MAAM,CAACa,SAAP,GAAmBC,GAAnB,CAAuB,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACjB,IAAN;IAAA,CAAxB,CAAtB;;IACA,IAAG,CAACc,aAAa,CAACI,QAAd,CAAuB,WAAvB,CAAJ,EAAwC;MACtChB,MAAM,CAACiB,QAAP,CAAgBC,WAAhB;IACD;EAEF;AACF,CAVM,C,CAYP;;AACAV,SAAS;AAETR,MAAM,CAACmB,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;EACpC,IAAMb,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAnB;;EACA,IAAI,CAACS,EAAE,CAACG,OAAH,CAAWC,MAAhB,EAAwB;IACtB,IAAGf,UAAH,EAAc;MACZa,IAAI,CAAC,WAAD,CAAJ;IACD,CAFD,MAEK;MACHA,IAAI,CAAC,QAAD,CAAJ;IACD;EACF;;EACDA,IAAI;AACL,CAVD;AAWA,eAAetB,MAAf"},"metadata":{},"sourceType":"module"}