{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Container from '../views/Container.vue';\nimport Home from '../views/Home.vue';\nimport Login from '../views/Login.vue';\nimport Register from '../views/Register.vue';\nimport NotFound from '../views/NotFound.vue';\nimport Person from '../views/Person.vue';\nVue.use(VueRouter);\nvar routes = [{\n  path: '/login',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/register',\n  name: 'Register',\n  component: Register\n}, {\n  path: '/notFound',\n  name: 'NotFound',\n  component: NotFound\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n}); // 提供一个重置路由的方法\n\nexport var resetRouter = function resetRouter() {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes: routes\n  });\n};\nexport var setRoutes = function setRoutes() {\n  var storeMenus = localStorage.getItem(\"menus\");\n\n  if (storeMenus) {\n    //dynamic route\n    var manageRoute = {\n      path: '/',\n      name: 'Container',\n      component: Container,\n      redirect: \"/home\",\n      children: [{\n        path: 'person',\n        name: 'User Info',\n        component: Person,\n        meta: {\n          name: 'User Information'\n        }\n      }]\n    };\n    var menus = JSON.parse(storeMenus);\n    menus.forEach(function (item) {\n      if (item.path) {\n        var itemMenu = {\n          path: item.path.replace(\"/\", \"\"),\n          name: item.pagePath,\n          component: function component() {\n            return import('../views/' + item.pagePath + '.vue');\n          },\n          meta: {\n            name: item.name\n          }\n        };\n        manageRoute.children.push(itemMenu);\n      } else if (item.children.length) {\n        item.children.forEach(function (subItem) {\n          if (subItem.path) {\n            var subItemMenu = {\n              path: subItem.path.replace(\"/\", \"\"),\n              name: subItem.pagePath,\n              component: function component() {\n                return import('../views/' + subItem.pagePath + '.vue');\n              },\n              meta: {\n                name: subItem.name\n              }\n            };\n            manageRoute.children.push(subItemMenu);\n          }\n        });\n      }\n    });\n    var currentRoutes = router.getRoutes().map(function (v) {\n      return v.name;\n    });\n\n    if (!currentRoutes.includes('Container')) {\n      router.addRoute(manageRoute);\n    }\n  }\n}; //reset routes\n\nsetRoutes();\nrouter.beforeEach(function (to, from, next) {\n  var storeMenus = localStorage.getItem(\"menus\");\n\n  if (!to.matched.length) {\n    if (storeMenus) {\n      next(\"/notFound\");\n    } else {\n      next(\"/login\");\n    }\n  }\n\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","Container","Home","Login","Register","NotFound","Person","use","routes","path","name","component","router","mode","base","process","env","BASE_URL","resetRouter","matcher","setRoutes","storeMenus","localStorage","getItem","manageRoute","redirect","children","meta","menus","JSON","parse","forEach","item","itemMenu","replace","pagePath","push","length","subItem","subItemMenu","currentRoutes","getRoutes","map","v","includes","addRoute","beforeEach","to","from","next","matched"],"sources":["E:/environment/project/agricultural-management-system/web/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Container from '../views/Container.vue'\nimport Home from '../views/Home.vue'\nimport Login from '../views/Login.vue'\nimport Register from '../views/Register.vue'\nimport NotFound from '../views/NotFound.vue'\nimport Person from '../views/Person.vue'\n\n\nVue.use(VueRouter)\n\nconst routes = [\n  {path: '/login', name: 'Login', component: Login,},\n  {path: '/register', name: 'Register', component: Register,},\n  {path: '/notFound', name: 'NotFound', component: NotFound,},\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 提供一个重置路由的方法\nexport const resetRouter = () => {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n  })\n}\n\nexport const setRoutes = () => {\n  const storeMenus = localStorage.getItem(\"menus\");\n  if(storeMenus){\n    //dynamic route\n    const manageRoute = { path: '/', name:'Container', component: Container, redirect:\"/home\", children:[\n      { path:'person', name:'User Info', component: Person, meta:{ name: 'User Information'},},\n    ] }\n    const menus = JSON.parse(storeMenus)\n    menus.forEach(item => {\n      if(item.path){\n        let itemMenu = { path: item.path.replace(\"/\", \"\"), name: item.pagePath, component:() => import('../views/' + item.pagePath + '.vue'), meta:{ name: item.name}}\n        manageRoute.children.push(itemMenu)\n      }else if(item.children.length){\n        item.children.forEach(subItem => {\n          if(subItem.path){\n            let subItemMenu = { path: subItem.path.replace(\"/\", \"\"), name: subItem.pagePath, component:() => import('../views/' + subItem.pagePath + '.vue'), meta:{ name: subItem.name}}\n            manageRoute.children.push(subItemMenu)\n          }  \n        })\n      }\n    });\n    const currentRoutes = router.getRoutes().map(v => v.name)\n    if(!currentRoutes.includes('Container')){\n      router.addRoute(manageRoute)\n    }\n    \n  }\n}\n\n//reset routes\nsetRoutes()\n\nrouter.beforeEach((to, from, next) => {\n  const storeMenus = localStorage.getItem(\"menus\")\n  if (!to.matched.length) {\n    if(storeMenus){\n      next(\"/notFound\")\n    }else{\n      next(\"/login\")\n    }\n  }\n  next()\n})\nexport default router\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}