"use strict";(self["webpackChunkfarmer_center"]=self["webpackChunkfarmer_center"]||[]).push([[786],{786:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-card",[a("div",{staticStyle:{padding:"10px 0","text-align":"center","font-weight":"bold"}},[a("i",{staticClass:"el-icon-document"}),t._v(" Today's Task: ")])])],1),a("el-col",{attrs:{span:5}},[a("el-card",{staticStyle:{color:"#409EFF","margin-left":"20px"}},[a("div",{staticStyle:{"font-size":"small"}},[a("i",{staticClass:"el-icon-grape"}),t._v(" Sowing")]),a("div",{staticStyle:{padding:"10px 0","text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.sowing)+" KG ")])])],1),a("el-col",{attrs:{span:5}},[a("el-card",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[a("div",{staticStyle:{"font-size":"small"}},[a("i",{staticClass:"el-icon-water-cup"}),t._v(" Watering")]),a("div",{staticStyle:{padding:"10px 0","text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.watering)+" KG ")])])],1),a("el-col",{attrs:{span:5}},[a("el-card",{staticStyle:{color:"#409EFF","margin-left":"20px"}},[a("div",{staticStyle:{"font-size":"small"}},[a("i",{staticClass:"el-icon-chicken"}),t._v(" Fertilization (nitrogen)")]),a("div",{staticStyle:{padding:"10px 0","text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.nitrogen)+" KG ")])])],1),a("el-col",{attrs:{span:5}},[a("el-card",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[a("div",{staticStyle:{"font-size":"small"}},[a("i",{staticClass:"el-icon-chicken"}),t._v(" Fertilization (phosphate)")]),a("div",{staticStyle:{padding:"10px 0","text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.phosphate)+" KG ")])])],1)],1),a("div",{staticStyle:{height:"20px"}}),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"center"},attrs:{inline:!0}},[a("el-form-item",{attrs:{prop:"chartCrop"}},[a("el-select",{attrs:{filterable:"",placeholder:"Please select a crop name","default-first-option":"paddy"},model:{value:t.chartCrop,callback:function(e){t.chartCrop=e},expression:"chartCrop"}},[a("el-option",{attrs:{label:"paddy",value:"paddy"}}),a("el-option",{attrs:{label:"potato",value:"potato"}}),a("el-option",{attrs:{label:"soybean",value:"soybean"}}),a("el-option",{attrs:{label:"peanut",value:"peanut"}}),a("el-option",{attrs:{label:"wheat",value:"wheat"}}),a("el-option",{attrs:{label:"barley",value:"barley"}})],1)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"to","start-placeholder":"Begin date","end-placeholder":"End date","value-format":"yyyy-MM-dd"},model:{value:t.chartDateVal,callback:function(e){t.chartDateVal=e},expression:"chartDateVal"}})],1),a("el-form-item",[a("el-button",{staticClass:"ml-5",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getActivityChart}},[t._v("Search")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"40px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"chart",staticStyle:{height:"500px"},attrs:{id:"activity"}})],1)],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{prop:"crop"}},[a("el-select",{attrs:{filterable:"",placeholder:"Please select a crop name"},model:{value:t.crop,callback:function(e){t.crop=e},expression:"crop"}},[a("el-option",{attrs:{label:"paddy",value:"paddy"}}),a("el-option",{attrs:{label:"potato",value:"potato"}}),a("el-option",{attrs:{label:"soybean",value:"soybean"}}),a("el-option",{attrs:{label:"peanut",value:"peanut"}}),a("el-option",{attrs:{label:"wheat",value:"wheat"}}),a("el-option",{attrs:{label:"barley",value:"barley"}})],1)],1),a("el-form-item",{attrs:{prop:"type"}},[a("el-select",{attrs:{filterable:"",placeholder:"Please select the activity"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-option",{attrs:{label:"watering",value:"watering"}}),a("el-option",{attrs:{label:"fertilization (nitrogen)",value:"nitrogen"}}),a("el-option",{attrs:{label:"fertilization (phosphate)",value:"phosphate"}}),a("el-option",{attrs:{label:"sowing",value:"sowing"}}),a("el-option",{attrs:{label:"harvest",value:"harvest"}})],1)],1),a("el-form-item",{attrs:{prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"to","start-placeholder":"Begin date","end-placeholder":"End date","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),a("el-form-item",[a("el-button",{staticClass:"ml-5",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.loadPage}},[t._v("Search")]),a("el-button",{staticClass:"ml-5",attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("Reset")])],1)],1),a("div",{staticStyle:{margin:"10px 0"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("Add "),a("i",{staticClass:"el-icon-circle-plus-outline"})]),a("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"DELETE","cancel-button-text":"CANCEL",icon:"el-icon-info","icon-color":"red",title:"Are you sure you want to delete these data?"},on:{confirm:t.delBatch,cancel:t.cancel}},[a("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("Delete in bulk "),a("i",{staticClass:"el-icon-remove-outline"})])],1)],1),a("el-table",{attrs:{data:t.tableData,"default-sort":{prop:"date",order:"descending"},border:"",stripe:"","header-cell-style":{textAlign:"center",background:"beige"},"cell-style":t.rowClass},on:{"selection-change":t.handleSelectionChange}},[a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"empty"},slot:"empty"},[a("el-empty",{attrs:{description:"Sorry, there is no data you are looking for"}})],1),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"date",label:"Date",sortable:"",width:"100"}}),a("el-table-column",{attrs:{prop:"crop",label:"Crop",width:"150"}}),a("el-table-column",{attrs:{prop:"type",label:"Specific Activity"}}),a("el-table-column",{attrs:{prop:"quantity",label:"Quantity (in KG)",sortable:""}}),a("el-table-column",{attrs:{prop:"option",label:"Operation",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("Edit "),a("i",{staticClass:"el-icon-edit"})]),a("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"DELETE","cancel-button-text":"CANCEL",icon:"el-icon-info","icon-color":"red",title:"Are you sure to delete?"},on:{confirm:function(a){return t.del(e.row.id)},cancel:t.cancel}},[a("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("Delete "),a("i",{staticClass:"el-icon-remove-outline"})])],1)]}}])})],1),a("div",{staticStyle:{padding:"10px 0"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,this.total],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"Activities Records",visible:t.dialogFormVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"activityForm",attrs:{"label-width":"auto",size:"small",model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"Date",prop:"date"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"select date","value-format":"yyyy-MM-dd"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),a("el-form-item",{attrs:{label:"Crop",prop:"crop"}},[a("el-select",{attrs:{filterable:"",placeholder:"Please select a crop name"},model:{value:t.form.crop,callback:function(e){t.$set(t.form,"crop",e)},expression:"form.crop"}},[a("el-option",{attrs:{label:"paddy",value:"paddy"}}),a("el-option",{attrs:{label:"potato",value:"potato"}}),a("el-option",{attrs:{label:"soybean",value:"soybean"}}),a("el-option",{attrs:{label:"peanut",value:"peanut"}}),a("el-option",{attrs:{label:"wheat",value:"wheat"}}),a("el-option",{attrs:{label:"barley",value:"barley"}})],1)],1),a("el-form-item",{attrs:{label:"Activity",prop:"type"}},[a("el-select",{attrs:{filterable:"",placeholder:"Please select the specific activity"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"watering",value:"watering"}}),a("el-option",{attrs:{label:"fertilization (nitrogen)",value:"nitrogen"}}),a("el-option",{attrs:{label:"fertilization (phosphate)",value:"phosphate"}}),a("el-option",{attrs:{label:"sowing",value:"sowing"}}),a("el-option",{attrs:{label:"harvest",value:"harvest"}})],1)],1),a("el-form-item",{attrs:{label:"Quantity",prop:"quantity"}},[a("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"(KG)",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",t._n(e))},expression:"form.quantity"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.formCancel}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("Confirm")])],1)],1)],1)},i=[],o=(a(21249),a(70727)),r={name:"Activity",data:function(){return{tableData:[],total:0,currentPage:1,pageSize:5,crop:"",type:"",form:{},multipleSelection:[],dialogFormVisible:!1,rules:{date:[{required:!0,message:"Please choose the date",trigger:"blur"}],crop:[{required:!0,message:"Please choose one crop",trigger:"blur"}],type:[{required:!0,message:"Please choose the activity",trigger:"blur"}],quantity:[{required:!0,message:"Please input the quantity",trigger:"blur"}]},chartDateVal:[],chartCrop:"paddy",sowing:0,watering:0,nitrogen:0,phosphate:0,harvest:0,dateVal:[],pickerOptions:{shortcuts:[{text:"within 7 days",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"within 30 days",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"within 90 days",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},watch:{dateVal:function(t){null==t&&(this.dateVal="")},chartDateVal:function(t){null==t&&(this.chartDateVal="")}},created:function(){this.loadPage()},mounted:function(){this.chartDateVal[0]=this.getFormatDate(2),this.chartDateVal[1]=this.getFormatDate(0),this.getActivityChart(),this.getTask()},methods:{getFormatDate:function(t){var e=new Date,a="-",l=e.getFullYear()-t,i=e.getMonth()+1,o=e.getDate();i>=1&&i<=9&&(i="0"+i),o>=0&&o<=9&&(o="0"+o);var r=l+a+i+a+o;return r},rowClass:function(){return"text-align:center"},loadPage:function(){var t=this;this.request.get("/agri-activity/page",{params:{currentPage:this.currentPage,pageSize:this.pageSize,crop:this.crop,type:this.type,beginDate:this.dateVal[0],endDate:this.dateVal[1]}}).then((function(e){t.tableData=e.data.records,t.total=e.data.total;var a=parseInt((t.total-1)/t.pageSize+1);t.currentPage>a&&(t.currentPage=a)}))},handleSizeChange:function(t){this.pageSize=t,this.loadPage()},handleCurrentChange:function(t){this.currentPage=t,this.loadPage()},handleAdd:function(){this.dialogFormVisible=!0,this.form={}},save:function(){var t=this;this.$refs["activityForm"].validate((function(e){e?t.request.post("/agri-activity",t.form).then((function(e){200===e.code?(t.$message.success("Successfully saved"),t.dialogFormVisible=!1,t.loadPage()):t.$message.error("Failed to save, please try again")})):t.$message.error("Failed to save, please check that your data meets the requirements")}))},handleEdit:function(t){this.form=Object.assign({},t),this.dialogFormVisible=!0},del:function(t){var e=this;this.request.delete("/agri-activity/"+t).then((function(t){200===t.code?(e.$message.success("Successfully deleted"),e.loadPage()):e.$message.error("Failed to delete")}))},handleSelectionChange:function(t){this.multipleSelection=t},delBatch:function(){var t=this,e=this.multipleSelection.map((function(t){return t.id}));this.request.post("/agri-activity/batchDel",e).then((function(e){200===e.code?(t.$message.success("Successfully deleted"),t.loadPage()):t.$message.error("Failed to delete")}))},reset:function(){this.crop="",this.dateVal="",this.currentPage=1,this.type="",this.loadPage()},cancel:function(){this.$message.warning("Operation successfully canceled")},formCancel:function(){this.dialogFormVisible=!1,this.$message.warning("Form submission canceled")},getActivityChart:function(){var t=this,e=document.getElementById("activity"),a=o.S1(e),l={title:{text:"Agriculture Behavior Records",left:"center",textStyle:{fontStyle:"normal",fontWeight:"bold",fontFamily:"Arial",fontSize:25,color:"#E44D26"}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},legend:{orient:"horizontal",x:"center",y:"bottom",textStyle:{fontSize:12,color:"#eea849"}},grid:{left:"5%",right:"7%",top:"15%",bottom:"12%",containLabel:!0},toolbox:{show:!0,feature:{mark:{show:!0},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}}},calculable:!0,xAxis:{name:"Date",type:"time",axisLabel:{show:!0,textStyle:{color:"green",fontSize:"13",fontWeight:"bold"}},axisLine:{lineStyle:{color:"black",width:2}}},yAxis:{name:"Quantity (KG)",type:"value",axisLabel:{show:!0,textStyle:{color:"black",fontSize:"15"}},axisLine:{lineStyle:{color:"black",width:2}}},series:[{name:"sowing",data:[],type:"line"},{name:"watering",data:[],type:"line"},{name:"nitrogen",data:[],type:"line"},{name:"phosphate",data:[],type:"line"},{name:"harvest",data:[],type:"line"}]};this.request.get("/agri-activity/chart",{params:{crop:this.chartCrop,beginDate:this.chartDateVal[0],endDate:this.chartDateVal[1]}}).then((function(e){console.log(t),l.series[0].data=e.data[0].map((function(t){return[t.date,t.quantity]})),l.series[1].data=e.data[1].map((function(t){return[t.date,t.quantity]})),l.series[2].data=e.data[2].map((function(t){return[t.date,t.quantity]})),l.series[3].data=e.data[3].map((function(t){return[t.date,t.quantity]})),l.series[4].data=e.data[4].map((function(t){return[t.date,t.quantity]})),a.setOption(l)}))},getTask:function(){var t=this;this.request.get("/agri-activity/dailyTask").then((function(e){console.log(e),t.sowing=e.data[0],t.watering=e.data[1],t.nitrogen=e.data[2],t.phosphate=e.data[3],t.harvest=e.data[4]}))}}},n=r,s=a(1001),c=(0,s.Z)(n,l,i,!1,null,"2b39f22b",null),p=c.exports}}]);
//# sourceMappingURL=786-legacy.b465f399.js.map